{% extends "base.html" %}
{% block title %}Alert{% endblock %}
{% from "includes/_form_helper.html" import render_field %}
{% block content %}
<div class="container-fluid content">
  <div class="row justify-content-center">
    <div class="col-sm-12">
      <h4 class="text-center">Alert Details</h4>
      <p class="text-center">High Level Alerts Detected. Please deal with accordingly.</p>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-sm-10">
      <table class="table table-striped table-hover">
        <colgroup>
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 10%;" />
          <col style="width: 30%;" />
        </colgroup>
        <thead>
          <tr>
            <th scope="col">Request ID</th>
            <th scope="col">Alert Level</th>
            <th scope="col">Datetime</th>
            <th scope="col">IP Address</th>
            <th scope="col">Request Parameters</th>
            <th scope="col">Status</th>
            <th scope="col">Message</th>
            <th scope="col">Response</th>
          </tr>
        </thead>
        <tbody>
          {% for alert in alerts %}
          <td>{{ alert.request.id }}</td>
          <td>{{ alert.alert_level }}</td>
          <td>{{ alert.request.datetime }}</td>
          <td>{{ alert.request.ip_address }}</td>
          <td>{{ alert.request.request_params }}</td>
          <td>{{ alert.request.status }}</td>
          <td>{{ alert.request.status_msg }}</td>
          <td>
            <textarea
              class="request-response border-0 bg-transparent form-control"
              disabled="disabled">{{ alert.request.response }}</textarea>
          </td>
          <tr>
            <td>
              <button class="btn btn-success" onclick="location.href='/alert/email/{{ alert.request.id }}'">Email</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
